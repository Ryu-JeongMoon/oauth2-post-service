<!DOCTYPE html>
<html lang='en'
      xmlns:th='http://www.thymeleaf.org'
      xmlns:layout='http://www.ultraq.net.nz/thymeleaf/layout'
      xmlns:sec='http://www.thymeleaf.org/extras/spring-security'
      layout:decorate='~{layout}'>

<th:block layout:fragment='titleFragment'>
  <title th:text='#{label.member-edit}'>MEMBER EDIT</title>
</th:block>

<th:block layout:fragment='contentFragment'>
  <div class='container'>
    <form class='row g-3' id='form' autocomplete='off' th:object='${memberEditRequest}'>
      <div class='col-12'>
        <input class='form-control' readonly th:field='${memberReadResponse.id}' th:id='id' hidden>
      </div>
      <div class='col-12'>
        <label class='form-label' for='email' th:text='#{label.member.email}'>Email</label>
        <input class='form-control' id='email' readonly th:field='${memberReadResponse.email}' th:id='email'>
      </div>
      <div class='col-12 form-check'>
        <label class='form-label' for='nickname' th:text='#{label.member.nickname}'>Nickname</label>
        <input class='form-control' id='nickname' autocomplete='off' th:field='*{nickname}' th:id='nickname'>
      </div>
      <div class='col-12 form-check'>
        <label class='form-label' for='password' th:text='#{label.member.password}'>Password</label>
        <input class='form-control' id='password' type='password' autocomplete='off' th:field='*{password}'
               th:id='password'>
      </div>
      <div class='col-12 form-check' sec:authorize='hasRole("ADMIN") or hasRole("MANAGER")'>
        <label class='form-label' for='role' th:text='#{label.member.role}'>Role</label>
        <select class='form-control form-select dropdown-toggle' id='role' required th:placeholder='*{role}'>
          <option th:each='eachRole : ${T(com.support.oauth2postservice.domain.enumeration.Role).values()}'
                  th:text='#{__${eachRole.name()}__}'
                  th:value='${eachRole}'
                  th:selected='${eachRole == memberEditRequest.role}'></option>
        </select>
      </div>
      <div class='col-12 form-check' sec:authorize='hasRole("ADMIN")'>
        <label class='form-label' for='status' th:text='#{label.member.status}'>Status</label>
        <select class='form-control form-select' id='status' name='change-status' th:id='status'>
          <option th:each='eachStatus : ${T(com.support.oauth2postservice.domain.enumeration.Status).values()}'
                  th:text='#{__${eachStatus.name()}__}'
                  th:value='${eachStatus}'
                  th:selected='${eachStatus == memberEditRequest.status}'></option>
        </select>
      </div>
    </form>
    <div class='col-12 mt-4' style='text-align: center;'>
      <button class='btn btn-outline-primary' th:onclick='requestEdit()' th:text='#{label.button.edit}'></button>
    </div>
  </div>
  <th:block layout:fragment='customScriptFragment'>
    <script th:src='@{/js/member-api.js}' type='text/javascript'></script>
  </th:block>

</th:block>

</html>